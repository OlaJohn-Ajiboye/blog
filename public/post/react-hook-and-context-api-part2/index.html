<!doctype html>
<html ⚡ lang=en-us>
<head>
<meta charset=utf-8>
<script async src=https://cdn.ampproject.org/v0.js></script>
<script async custom-element=amp-analytics src=https://cdn.ampproject.org/v0/amp-analytics-0.1.js></script>
<script async custom-element=amp-sidebar src=https://cdn.ampproject.org/v0/amp-sidebar-0.1.js></script>
<script async custom-element=amp-youtube src=https://cdn.ampproject.org/v0/amp-youtube-0.1.js></script>
<title>Learn React Hook and Context Api Part(2)</title>
<meta name=author content="Ola John">
<meta name=description content="This is the second part of the series in learning React Hooks and the Context API. In the first part we learn the basics of useState, built the first parts of the Recipe Search application. The full code can be found on github">
<meta name=twitter:card content=summary>
<meta name=twitter:site content=@jolajiboye>
<meta name=twitter:title content="Learn React Hook and Context Api Part(2)">
<meta name=twitter:description content="This is the second part of the series in learning React Hooks and the Context API. In the first part we learn the basics of useState, built the first parts of the Recipe Search application. The full code can be found on github">
<meta name=twitter:image content=http://olajohn.me/img/avatar.jpg>
<meta name=generator content="Hugo 0.70.0">
<link rel=canonical href=http://olajohn.me/post/react-hook-and-context-api-part2/ >
<link rel=alternative href=/index.xml title="Ola John " type=application/atom+xml>
<meta name=renderer content=webkit>
<meta name=viewport content="width=device-width,minimum-scale=1,initial-scale=1">
<meta name=format-detection content="telephone=no,email=no,adress=no">
<meta name=robots content=index,follow>
<meta name=referrer content=origin-when-cross-origin>
<meta name=google-site-verification content=google_site_verification_code>
<meta name=msvalidate.01 content=bing_site_verification_code>
<link rel=icon href=/img/favicon.ico>
<meta name=apple-mobile-web-app-capable content=yes>
<link rel=apple-touch-icon sizes=120x120 href=/img/avatar.jpg>
<link rel=preconnect href=https://fonts.gstatic.com/ crossorigin>
<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400" rel=stylesheet>
<style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
<style amp-custom>/*! normalize.css v7.0.0 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}code,kbd,samp{font-family:monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}[hidden],template{display:none}body{font-size:18px;font-weight:300;line-height:1.618;font-family:Roboto,sans-serif;color:#777;background:#fff;text-rendering:optimizeLegibility;-webkit-overflow-scrolling:touch}a{color:#3f9adc;text-decoration:none;font-weight:600}a:focus,a:hover{opacity:.7;outline:none}amp-img{margin:0 auto;box-shadow:2px 20px 40px 10px rgba(0,0,0,.15)}button:hover{cursor:pointer}.main{margin-left:20rem;padding:1rem 2rem;max-width:100%;min-height:100vh;box-sizing:border-box}@media screen and (max-width:1440px){.main{width:calc(100% - 20rem)}}@media (min-width:800px) and (max-width:960px){.main{margin-left:15rem;width:calc(100% - 15rem)}}@media screen and (max-width:800px){.main{margin-left:0;padding:0 1rem 1rem;width:100%;min-height:0;border-left:none;border-right:none;border-top:1px solid #ddd;border-bottom:1px solid #ddd}}.footer{display:none}@media screen and (max-width:800px){.footer{display:block;padding:1rem;font-size:.8rem;text-align:center;font-family:Roboto Mono,Menlo,Monaco,Consolas,Courier New,monospace}}.icon{font-style:normal;text-decoration:inherit;width:1em;height:1em;font-variant:normal;text-transform:none;line-height:1em}.icon,.share{display:inline-block;text-align:center}.share{font-weight:400;margin-left:.2rem;border:none;outline:none;color:#fff;width:30px;height:30px;border-radius:50%}.share-twitter{background-color:#55acee}.share-twitter-icon{margin:5px 0 0 1px}.share-facebook{background-color:#3b5998}.header{position:fixed;left:0;top:0;bottom:0;width:20rem;padding:1rem;box-sizing:border-box;text-align:center;background-color:rgba(106,172,14,.9)}@media screen and (max-width:800px){.header{width:100%;position:relative}}@media (min-width:800px) and (max-width:960px){.header{width:15rem}}.logo{margin-top:3rem;border-radius:20%;border:4px solid #fff;transition:all .5s ease-out}.logo:hover{border-radius:50%;box-shadow:0 1px 4px rgba(0,0,0,.3)}@media screen and (max-width:800px){.logo{position:absolute;top:1rem;left:1rem;width:2rem;height:2rem;margin-top:0;border:2px solid #fff}}.title{font-size:1.5rem;font-family:Roboto,sans-serif;font-weight:600;margin:1rem auto}@media screen and (max-width:800px){.title{margin:0 auto}}.subtitle,.title a{color:#fff}.subtitle{margin-bottom:1rem;opacity:.8}.menu{display:none}@media screen and (min-width:800px){.menu{display:block}}.menu-list{list-style:none;padding:0}.menu-item{padding:1rem 0}.menu-item a{font-weight:100;opacity:.8;color:#fff}.menu-item a:focus,.menu-item a:hover{opacity:1}.menu-item.is-active a{color:#444;opacity:1;font-weight:700}.menu-toggle{border:none;outline:none;font-size:2rem;background-color:transparent;color:#fff;position:absolute;top:1rem;right:1rem}@media screen and (min-width:800px){.menu-toggle{display:none}}.sidebar{background-color:#fff;width:100vw}@media screen and (min-width:640px){.sidebar{width:50vw}}.sidebar-list{list-style:none;padding:0;margin:0}.sidebar-menu{text-align:right;padding:16px}.sidebar-item{font-size:2rem;padding:30px 35px 30px 25px;border-top:1px solid #ddd}.sidebar-item:hover{background-color:#f2f2f2}.sidebar-icon{border:none;outline:none;background-color:transparent;font-family:Roboto,sans-serif;font-weight:100;font-size:2rem}.sidebar-link{color:#000;font-weight:100}.social-list{margin:0;padding:0;list-style:none}@media screen and (min-width:800px){.social-list{position:absolute;bottom:10px;left:0;right:0}}.social-item{display:inline-block;margin:0 .2rem}.social-item a{color:#fff;font-weight:400}.entry-list{background-color:#f2f2f2}@media screen and (max-width:800px){.entry-list{padding-top:30px}}.entry-single{line-height:1.8;margin-bottom:22px;background-color:#fff;box-shadow:0 0 2px 0 rgba(137,146,177,.15),0 3px 10px 0 rgba(137,146,177,.1);border-radius:5px}.entry-single:hover{box-shadow:0 1px 15px 0 rgba(137,146,177,.15),0 10px 20px 0 rgba(137,146,177,.15)}.entry-cover{max-width:100%;border-radius:5px 5px 0 0;-o-object-fit:cover;object-fit:cover;box-shadow:none}.entry-title{margin:0;padding:20px 30px 0}.entry-link{font-size:1.5rem;font-weight:600;color:#262626}.entry-summary{padding:0 30px;text-align:justify;max-height:4rem;overflow:hidden}.entry-footer{margin:0 30px;padding:10px 0;border-top:1px solid #ddd;display:flex;justify-content:space-between}.entry-meta{margin:0;font-size:.8rem;letter-spacing:1px;text-transform:uppercase}.entry-time{color:#444}.entry-time:after{content:"";border-right:1px solid #ddd;margin:0 8px 0 10px}.pagination{display:flex;justify-content:flex-start}.pagination-btn{color:#777;padding:.8rem;background-color:#fff;border:1px solid #ddd;font-size:.8rem;text-transform:uppercase;border-radius:5px}.pagination-btn:focus,.pagination-btn:hover{color:#fff;background-color:#6aac0e;border-color:#6aac0e}.pagination-next{margin-left:auto}.post-header:after{display:block;content:"";border-bottom-width:3px;border-bottom-style:solid;width:60px;padding-top:10px;border-bottom-color:#6aac0e}.post-title{font-size:2rem;color:#262626;line-height:1.5;margin-top:1.5rem;margin-bottom:.5rem}.post-footer{margin:1rem 0;line-height:1.8}.post-tags{margin-top:0;margin-bottom:1rem;padding-left:0}.post-tag{display:inline-block;margin:0 .5rem 0 0;border-radius:3px;padding:5px 10px;background:#f2f2f2;font-size:.8rem}.post-tag:hover{background:#ddd;box-shadow:0 1px 15px 0 rgba(137,146,177,.15),0 10px 20px 0 rgba(137,146,177,.15)}.post-content{line-height:1.8}.post-content h1,.post-content h2,.post-content h3,.post-content h4,.post-content h5,.post-content h6{color:#6cb505;font-weight:700;line-height:1.125}.post-content h1{margin-top:2rem;margin-bottom:1rem;font-size:2rem}.post-content h2{margin-top:1.75rem;margin-bottom:.75rem;font-size:1.5rem}.post-content h3{margin-top:1.5rem;margin-bottom:.5rem;font-size:1.25rem}.post-content h4{margin-top:1.25rem;margin-bottom:.25rem;font-size:1rem}.post-content h5,.post-content h6{margin-top:1rem;margin-bottom:0;font-size:.8rem}.post-content li+li{margin-top:.5rem}.post-content em{color:#777;font-style:italic}.post-content strong{color:#444}.post-content del{color:#777;text-decoration:line-through}.post-content ins{color:#444;text-decoration:underline}.post-content hr{position:relative;margin:2rem auto;border-top:1px dashed #ddd;border-bottom:none}.post-content hr:before{content:"sep line";position:absolute;top:-12px;left:calc(50% - 40px);padding:0 .5rem;background-color:#fff;color:#ddd;font-size:.8rem;font-family:Roboto Mono,Menlo,Monaco,Consolas,Courier New,monospace}.post-content p{margin-top:1.5rem;margin-bottom:1.5rem;text-align:justify}.post-content blockquote{background-color:#f2f2f2;border-left:5px solid #ddd;padding:.5rem 1rem;margin:2rem 0}.post-content blockquote p{margin-top:.5rem;margin-bottom:.5rem}.post-content blockquote cite{margin-top:1.5rem;color:#777;font-size:.9rem}.post-content code,.post-content tt{padding:0;padding-top:.2em;padding-bottom:.2em;margin:0;font-size:.9em;background-color:#ddd;font-family:Roboto Mono,Menlo,Monaco,Consolas,Courier New,monospace}.post-content code:after,.post-content code:before,.post-content tt:after,.post-content tt:before{letter-spacing:-.2em;content:"\00a0"}.post-content kbd{display:inline-block;padding:.25em;background-color:#f2f2f2;border:1px solid #ddd;border-bottom-color:#ddd;border-radius:3px;box-shadow:inset 0 -1px 0 rgba(0,0,0,.05);font-size:.8em;line-height:1.25;font-family:Roboto Mono,Menlo,Monaco,Consolas,Courier New,monospace;color:#777}.post-content pre{margin:2rem auto;padding:1rem;overflow-x:auto;border-radius:3px;font-size:.9rem;line-height:1.618;white-space:pre;word-wrap:normal;word-break:normal;background:#ddd;color:#777}.post-content pre code{font-size:.9rem;background-color:transparent}.post-content pre code:after,.post-content pre code:before{content:none}.post-content sub,.post-content sup{font-size:.8rem}.post-content sub a,.post-content sub a:focus,.post-content sub a:hover,.post-content sup a,.post-content sup a:focus,.post-content sup a:hover{border-bottom:none}.post-content ol{margin-left:0;margin-top:2rem;margin-bottom:2rem;padding-left:1.5rem;list-style:decimal outside}.post-content ol ol{margin-top:.5rem;margin-bottom:.5rem;list-style:lower-roman outside}.post-content ol ul{margin-top:.5rem;margin-bottom:.5rem;list-style:disc outside}.post-content ul{margin-left:0;margin-top:2rem;margin-bottom:2rem;padding-left:1.5rem;list-style:disc outside}.post-content ul ul{margin-top:.5rem;margin-bottom:.5rem;list-style:circle outside}.post-content ul ol{margin-top:.5rem;margin-bottom:.5rem;list-style:decimal outside}.post-content dl{margin-top:2rem;margin-bottom:2rem}.post-content dl dt{color:#6aac0e;margin-top:1rem}.post-content dl dt:after{content:":"}.post-content dl dd{text-indent:2rem;margin-left:0;margin-top:.25rem}.post-content figure{display:block;margin:2rem auto}.post-content figure img{max-width:100%;box-shadow:2px 20px 40px 10px rgba(0,0,0,.15)}@media screen and (max-width:800px){.post-content figure img{box-shadow:none}}.post-content figure figcaption h4{color:#ddd;font-size:.9rem;text-align:center}table{background-color:#f2f2f2;color:#444;margin:2rem auto;width:100%;border-collapse:collapse;border-radius:5px}table td,table th{border:1px solid #ddd;border-width:0 0 1px;padding:.5em .75em;vertical-align:center}table th{color:#444}table tr:hover{background-color:#ddd}table thead td,table thead th{border-width:0 0 2px;color:#777}table tfoot td,table tfoot th{border-width:2px 0 0;color:#777}table tbody tr:last-child td,table tbody tr:last-child th{border-bottom-width:0}table tr:first-child th:first-child{border-top-left-radius:5px}table tr:first-child th:last-child{border-top-right-radius:5px}table tr:last-child td:first-child{border-bottom-left-radius:5px}table tr:last-child td:last-child{border-bottom-right-radius:5px}.not-found{margin:5rem auto 0;font-family:Roboto Mono,Menlo,Monaco,Consolas,Courier New,monospace;text-align:center}.error-emoji{color:#444;font-size:3rem}.error-text{font-size:1.25rem}.error-link{margin-top:2rem;font-size:1rem;color:#6aac0e}</style>
</head>
<body>
<svg xmlns=http://www.w3.org/2000/svg style="display: none;">
<symbol id=icon-menu viewBox="0 0 640 640">
<path d="M0 96h640v64h-640v-64zM0 288h640v64h-640v-64zM0 480h640v64h-640v-64z"/>
</symbol>
<symbol id=icon-rss viewBox="0 0 24 24">
<path d="M19.199 24C19.199 13.467 10.533 4.8 0 4.8V0c13.165 0 24 10.835 24 24h-4.801zM3.291 17.415c1.814 0 3.293 1.479 3.293 3.295 0 1.813-1.485 3.29-3.301 3.29C1.47 24 0 22.526 0 20.71s1.475-3.294 3.291-3.295zM15.909 24h-4.665c0-6.169-5.075-11.245-11.244-11.245V8.09c8.727 0 15.909 7.184 15.909 15.91z"/>
</symbol>
<symbol id=icon-email viewBox="0 0 24 24">
<path d="M24 4.5v15c0 .85-.65 1.5-1.5 1.5H21V7.387l-9 6.463-9-6.463V21H1.5C.649 21 0 20.35 0 19.5v-15c0-.425.162-.8.431-1.068C.7 3.16 1.076 3 1.5 3H2l10 7.25L22 3h.5c.425 0 .8.162 1.069.432.27.268.431.643.431 1.068z"/>
</symbol>
<symbol id=icon-twitter viewBox="0 0 24 24">
<path d="M23.954 4.569c-.885.389-1.83.654-2.825.775 1.014-.611 1.794-1.574 2.163-2.723-.951.555-2.005.959-3.127 1.184-.896-.959-2.173-1.559-3.591-1.559-2.717 0-4.92 2.203-4.92 4.917 0 .39.045.765.127 1.124C7.691 8.094 4.066 6.13 1.64 3.161c-.427.722-.666 1.561-.666 2.475 0 1.71.87 3.213 2.188 4.096-.807-.026-1.566-.248-2.228-.616v.061c0 2.385 1.693 4.374 3.946 4.827-.413.111-.849.171-1.296.171-.314 0-.615-.03-.916-.086.631 1.953 2.445 3.377 4.604 3.417-1.68 1.319-3.809 2.105-6.102 2.105-.39 0-.779-.023-1.17-.067 2.189 1.394 4.768 2.209 7.557 2.209 9.054 0 13.999-7.496 13.999-13.986 0-.209 0-.42-.015-.63.961-.689 1.8-1.56 2.46-2.548l-.047-.02z"/>
</symbol>
<symbol id=icon-github viewBox="0 0 24 24">
<path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
</symbol>
<symbol id=icon-dribbble viewBox="0 0 24 24">
<path d="M12 24C5.385 24 0 18.615 0 12S5.385 0 12 0s12 5.385 12 12-5.385 12-12 12zm10.12-10.358c-.35-.11-3.17-.953-6.384-.438 1.34 3.684 1.887 6.684 1.992 7.308 2.3-1.555 3.936-4.02 4.395-6.87zm-6.115 7.808c-.153-.9-.75-4.032-2.19-7.77l-.066.02c-5.79 2.015-7.86 6.025-8.04 6.4 1.73 1.358 3.92 2.166 6.29 2.166 1.42 0 2.77-.29 4-.814zm-11.62-2.58c.232-.4 3.045-5.055 8.332-6.765.135-.045.27-.084.405-.12-.26-.585-.54-1.167-.832-1.74C7.17 11.775 2.206 11.71 1.756 11.7l-.004.312c0 2.633.998 5.037 2.634 6.855zm-2.42-8.955c.46.008 4.683.026 9.477-1.248-1.698-3.018-3.53-5.558-3.8-5.928-2.868 1.35-5.01 3.99-5.676 7.17zM9.6 2.052c.282.38 2.145 2.914 3.822 6 3.645-1.365 5.19-3.44 5.373-3.702-1.81-1.61-4.19-2.586-6.795-2.586-.825 0-1.63.1-2.4.285zm10.335 3.483c-.218.29-1.935 2.493-5.724 4.04.24.49.47.985.68 1.486.08.18.15.36.22.53 3.41-.43 6.8.26 7.14.33-.02-2.42-.88-4.64-2.31-6.38z"/>
</symbol>
<symbol id=icon-linkedin viewBox="0 0 24 24">
<title>LinkedIn</title>
<path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
</symbol>
<symbol id=icon-facebook viewBox="0 0 60 60">
<path d="M42.8,23.8h-7.4v-4.8c0-1.8,1.2-2.2,2.1-2.2c0.8,0,5.2,0,5.2, 0v-8l-7.2,0c-8,0-9.8,6-9.8,9.8v5.3 h-4.6V32h4.6c0,10.6,0,23.3,0,23.3h9.7c0,0,0-12.9,0-23.3H42L42.8,23.8z"/>
</symbol>
<symbol id=icon-instagram viewBox="0 0 24 24">
<path d="M12 0C8.74 0 8.333.015 7.053.072 5.775.132 4.905.333 4.14.63c-.789.306-1.459.717-2.126 1.384S.935 3.35.63 4.14C.333 4.905.131 5.775.072 7.053.012 8.333 0 8.74 0 12s.015 3.667.072 4.947c.06 1.277.261 2.148.558 2.913.306.788.717 1.459 1.384 2.126.667.666 1.336 1.079 2.126 1.384.766.296 1.636.499 2.913.558C8.333 23.988 8.74 24 12 24s3.667-.015 4.947-.072c1.277-.06 2.148-.262 2.913-.558.788-.306 1.459-.718 2.126-1.384.666-.667 1.079-1.335 1.384-2.126.296-.765.499-1.636.558-2.913.06-1.28.072-1.687.072-4.947s-.015-3.667-.072-4.947c-.06-1.277-.262-2.149-.558-2.913-.306-.789-.718-1.459-1.384-2.126C21.319 1.347 20.651.935 19.86.63c-.765-.297-1.636-.499-2.913-.558C15.667.012 15.26 0 12 0zm0 2.16c3.203 0 3.585.016 4.85.071 1.17.055 1.805.249 2.227.415.562.217.96.477 1.382.896.419.42.679.819.896 1.381.164.422.36 1.057.413 2.227.057 1.266.07 1.646.07 4.85s-.015 3.585-.074 4.85c-.061 1.17-.256 1.805-.421 2.227-.224.562-.479.96-.899 1.382-.419.419-.824.679-1.38.896-.42.164-1.065.36-2.235.413-1.274.057-1.649.07-4.859.07-3.211 0-3.586-.015-4.859-.074-1.171-.061-1.816-.256-2.236-.421-.569-.224-.96-.479-1.379-.899-.421-.419-.69-.824-.9-1.38-.165-.42-.359-1.065-.42-2.235-.045-1.26-.061-1.649-.061-4.844 0-3.196.016-3.586.061-4.861.061-1.17.255-1.814.42-2.234.21-.57.479-.96.9-1.381.419-.419.81-.689 1.379-.898.42-.166 1.051-.361 2.221-.421 1.275-.045 1.65-.06 4.859-.06l.045.03zm0 3.678c-3.405 0-6.162 2.76-6.162 6.162 0 3.405 2.76 6.162 6.162 6.162 3.405 0 6.162-2.76 6.162-6.162 0-3.405-2.76-6.162-6.162-6.162zM12 16c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4zm7.846-10.405c0 .795-.646 1.44-1.44 1.44-.795 0-1.44-.646-1.44-1.44 0-.794.646-1.439 1.44-1.439.793-.001 1.44.645 1.44 1.439z"/>
</symbol>
<symbol id=icon-youtube viewBox="0 0 24 24">
<path class=a d="M23.495 6.205a3.007 3.007 0 0 0-2.088-2.088c-1.87-.501-9.396-.501-9.396-.501s-7.507-.01-9.396.501A3.007 3.007 0 0 0 .527 6.205a31.247 31.247 0 0 0-.522 5.805 31.247 31.247 0 0 0 .522 5.783 3.007 3.007 0 0 0 2.088 2.088c1.868.502 9.396.502 9.396.502s7.506 0 9.396-.502a3.007 3.007 0 0 0 2.088-2.088 31.247 31.247 0 0 0 .5-5.783 31.247 31.247 0 0 0-.5-5.805zM9.609 15.601V8.408l6.264 3.602z"/>
</symbol>
<symbol id=icon-pinterest viewBox="0 0 24 24">
<path d="M8.134 18.748c0-1.6.2-3 .8-4.4.5-1.4 1.2-2.6 2.2-3.6.9-1 2-1.9 3.2-2.6 1.2-.8 2.5-1.3 3.9-1.7 1.5-.4 2.9-.5 4.4-.5 2.2 0 4.3.4 6.2 1.4 1.9.9 3.5 2.3 4.7 4.1 1.2 1.9 1.8 3.9 1.8 6.2 0 1.4-.1 2.7-.4 4-.2 1.3-.7 2.6-1.2 3.8-.6 1.2-1.3 2.3-2.2 3.2-.8.9-1.8 1.7-3.1 2.2-1.2.6-2.5.9-4 .9-1 0-1.9-.3-2.9-.7-.9-.5-1.6-1.1-2-1.9-.1.5-.3 1.4-.6 2.4-.3 1.1-.4 1.7-.5 2-.1.3-.2.9-.4 1.6-.3.7-.4 1.2-.6 1.5-.1.3-.4.7-.7 1.3-.3.6-.6 1.2-1 1.7-.3.5-.7 1.1-1.3 1.8l-.3.1-.2-.2c-.2-2.2-.3-3.6-.3-4 0-1.3.2-2.8.5-4.4.3-1.7.8-3.7 1.4-6.2.6-2.5 1-3.9 1.1-4.4-.5-.9-.7-2.1-.7-3.6 0-1.2.4-2.3 1.1-3.3.8-1.1 1.7-1.6 2.8-1.6.9 0 1.6.3 2.1.9.4.6.7 1.3.7 2.2 0 .9-.3 2.3-1 4.1-.6 1.8-.9 3.1-.9 4 0 .9.3 1.6 1 2.2.6.6 1.4.9 2.3.9.8 0 1.5-.2 2.2-.5.6-.4 1.2-.9 1.6-1.5.5-.6.9-1.3 1.2-2 .4-.8.6-1.5.8-2.4.2-.8.4-1.6.5-2.4.1-.7.1-1.4.1-2.1 0-2.5-.8-4.4-2.3-5.8-1.6-1.4-3.6-2.1-6.1-2.1-2.8 0-5.2 1-7.1 2.8-1.9 1.9-2.9 4.2-2.9 7.1 0 .6.1 1.2.3 1.8.2.6.4 1.1.6 1.4.2.3.4.7.5 1 .2.3.3.5.3.6 0 .4-.1.9-.3 1.6-.2.6-.5 1-.8 1 0 0-.1-.1-.4-.1-.7-.2-1.3-.6-1.9-1.2-.5-.6-1-1.3-1.3-2-.3-.8-.5-1.6-.7-2.4-.2-.7-.2-1.5-.2-2.2z"/>
</symbol>
<symbol id=icon-reddit viewBox="0 0 24 24">
<title>Reddit icon</title>
<path d="M2.204 14.049c-.06.276-.091.56-.091.847 0 3.443 4.402 6.249 9.814 6.249 5.41 0 9.812-2.804 9.812-6.249 0-.274-.029-.546-.082-.809l-.015-.032c-.021-.055-.029-.11-.029-.165-.302-1.175-1.117-2.241-2.296-3.103-.045-.016-.088-.039-.126-.07-.026-.02-.045-.042-.067-.064-1.792-1.234-4.356-2.008-7.196-2.008-2.815 0-5.354.759-7.146 1.971-.014.018-.029.033-.049.049-.039.033-.084.06-.13.075-1.206.862-2.042 1.937-2.354 3.123 0 .058-.014.114-.037.171l-.008.015zm9.773 5.441c-1.794 0-3.057-.389-3.863-1.197-.173-.174-.173-.457 0-.632.176-.165.46-.165.635 0 .63.629 1.685.943 3.228.943 1.542 0 2.591-.3 3.219-.929.165-.164.45-.164.629 0 .165.18.165.465 0 .645-.809.808-2.065 1.198-3.862 1.198l.014-.028zm-3.606-7.573c-.914 0-1.677.765-1.677 1.677 0 .91.763 1.65 1.677 1.65s1.651-.74 1.651-1.65c0-.912-.739-1.677-1.651-1.677zm7.233 0c-.914 0-1.678.765-1.678 1.677 0 .91.764 1.65 1.678 1.65s1.651-.74 1.651-1.65c0-.912-.739-1.677-1.651-1.677zm4.548-1.595c1.037.833 1.8 1.821 2.189 2.904.45-.336.719-.864.719-1.449 0-1.002-.815-1.816-1.818-1.816-.399 0-.778.129-1.09.363v-.002zM2.711 9.963c-1.003 0-1.817.816-1.817 1.818 0 .543.239 1.048.644 1.389.401-1.079 1.172-2.053 2.213-2.876-.302-.21-.663-.329-1.039-.329v-.002zm9.217 12.079c-5.906 0-10.709-3.205-10.709-7.142 0-.275.023-.544.068-.809C.494 13.598 0 12.729 0 11.777c0-1.496 1.227-2.713 2.725-2.713.674 0 1.303.246 1.797.682 1.856-1.191 4.357-1.941 7.112-1.992l1.812-5.524.404.095s.016 0 .016.002l4.223.993c.344-.798 1.138-1.36 2.065-1.36 1.229 0 2.231 1.004 2.231 2.234 0 1.232-1.003 2.234-2.231 2.234s-2.23-1.004-2.23-2.23l-3.851-.912-1.467 4.477c2.65.105 5.047.854 6.844 2.021.494-.464 1.144-.719 1.833-.719 1.498 0 2.718 1.213 2.718 2.711 0 .987-.54 1.886-1.378 2.365.029.255.059.494.059.749-.015 3.938-4.806 7.143-10.72 7.143l-.034.009zm8.179-19.187c-.74 0-1.34.599-1.34 1.338 0 .738.6 1.34 1.34 1.34.732 0 1.33-.6 1.33-1.334 0-.733-.598-1.332-1.347-1.332l.017-.012z"/>
</symbol>
</svg>
<header class=header>
<amp-img alt="Ola John " width=128px height=128px class=logo src=/img/avatar.jpg sizes="(max-width: 800px) 36px, 128px">
</amp-img>
<h2 class=title><a href=http://olajohn.me/ title="Ola John ">Ola John</a></h2>
<p class=subtitle>Javascript | Node | React | Vue</p>
<button class=menu-toggle type=button on=tap:sidebar.open>
<svg class="icon icon-menu" fill=currentColor><use xlink:href=#icon-menu /></svg>
</button>
<nav class=menu>
<ul class=menu-list>
</ul>
</nav>
<ul class=social-list>
<li class=social-item>
<a href=mailto:ajiboye.o.john@gmail.com title=Email>
<svg class=icon fill=currentColor><use xlink:href=#icon-email /></svg>
</a>
</li>
<li class=social-item>
<a href=//github.com/olajohn-ajiboye title=GitHub>
<svg class=icon fill=currentColor><use xlink:href=#icon-github /></svg>
</a>
</li>
<li class=social-item>
<a href=//twitter.com/jolajiboye title=Twitter>
<svg class=icon fill=currentColor><use xlink:href=#icon-twitter /></svg>
</a>
</li>
<li class=social-item>
<a href=//www.facebook.com/ title=Facebook>
<svg class=icon fill=currentColor><use xlink:href=#icon-facebook /></svg>
</a>
</li>
<li class=social-item>
<a href=//www.youtube.com/user/youtube_username title=YouTube>
<svg class=icon fill=currentColor><use xlink:href=#icon-youtube /></svg>
</a>
</li>
<li class=social-item>
<a href=/index.xml title=RSS>
<svg class=icon fill=currentColor><use xlink:href=#icon-rss /></svg>
</a>
</li>
</ul>
</header>
<div></div>
<amp-sidebar id=sidebar class=sidebar layout=nodisplay side=right>
<ul class=sidebar-list>
<li class=sidebar-menu><button class=sidebar-icon on=tap:sidebar.close>X</button></li>
</ul>
</amp-sidebar>
<section class="main post-detail">
<header class=post-header>
<h1 class=post-title>Learn React Hook and Context Api Part(2)</h1>
<p class=entry-meta><span class=entry-time>Jul 4, 2019</span> 18 min read</p>
</header>
<article class=post-content><p>This is the second part of the series in learning <strong>React Hooks</strong> and the <strong>Context API</strong>. In the <a href=https://dev.to/mongopark/let-s-learn-react-hooks-and-context-api-by-building-a-recipe-search-app-39pc>first part</a> we learn the basics of <code>useState</code>, built the first parts of the Recipe Search application. The full code can be found on <a href=https://github.com/olajohn-ajiboye/Blog-React-Hook-Tutorial>github</a></p>
<h2 id=overview-of-what-well-learn-in-this-section>Overview of what we’ll learn in this section</h2>
<p>In this section, we’ll work a little bit more with <code>states</code> just to completely understand the concept. We’ll explain <code>useEffect</code>. Build the <code>RecipeSearch</code> component. We’ll then refactor our state management strategy to make use of the <code>Context API(useContext)</code>. Exciting right?</p>
<p></p>
<h2 id=first-things->First things …</h2>
<p>We won’t be making too many comparisons with classical components from here forward. Instead, we’ll focus more on learning the fundamentals of <code>hooks</code>. From the last part, I have extracted the <code>RecipeDetails</code> into its own component. This is for two reasons</p>
<ul>
<li>It is the right thing to do, it’s the point of component-based frameworks. It allows for code re-use.</li>
<li>Also, this will give us ample opportunity to see the problem that arises with passing props around(<code>props drilling</code>). And how context API can help us. More on that later! First, let’s take a stab at <code>useEffect</code></li>
</ul>
<h1 id=a-quick-primer-of-the-useeffect-hook>A quick primer of the <code>useEffect</code> hook</h1>
<p>In the first part, we mentioned and used the <code>useEffect</code> hook but didn’t give any detailed explanations. I am certain only a few of us realize the problem with the way we have utilized the useEffect hook in the first part.</p>
<blockquote>
<p>Hint: remember how we had to create our own separate JSON response. So as not to make too many API calls?.</p>
</blockquote>
<p>Ha-ha, we are doing something terribly wrong just using <code>useEffect</code> as we did before. I will dive into that in a bit.</p>
<p>But first, what is this <code>useEffect</code> hook ?. As the name implies, it must have something to do with <strong>effects</strong> right?, if that’s what you guessed you are absolutely correct. But what sort of effects?.</p>
<p>From official React <a href=https://reactjs.org/docs/hooks-effect.html>documentation</a>, effects are actions related to data fetching, setting up a subscription, and manually changing the DOM in React components. These are all examples of side effects. Some call it “side effects” others just call it ‘effects”. We are referring to the same thing.If you’re familiar with React class lifecycle methods, you can think of <code>useEffect</code> Hook as <code>componentDidMount</code>, <code>componentDidUpdate</code>, and <code>componentWillUnmount</code> combined.</p>
<h2 id=using-the-useeffect-hook-correctly>Using the <code>useEffect</code> hook correctly.</h2>
<p>Let’s relate this information to our application. In App.js we have fetched data from the food2fork API function and then called the function in the <code>useEffect</code> function. This is equivalent to calling it inside the <code>componentDidMount</code> function. Let’s take a closer look.</p>
<p>But think about it for a second. What is the intended use of <code>componentDidMount</code>?, the answer is in the name!. You only ever want to run any function inside this function when the component is mounted. Let’s go over that information slowly. <strong>Mounting</strong> - is phase the component is created (your code, and react’s internals) then inserted into the DOM.</p>
<p>But, if you have a function that causes a repeated effect inside a <code>componentDidMount</code> your component will continuously re-render except you find a way to clean it up. This is done usually within the <code>componentWillUnmount</code> lifecycle.</p>
<p>How then does <code>useEffect</code> manage to replace <code>componentDidMount</code> and <code>componentWillUnmount</code> within one function. Let’s revisit our wrong use of the useEffect to have a better grab of this. When we call the <code>useEffect</code> like below, the components continuously re-renders because it has no clue how to <em>unmount</em>. This is a terrible performance bottleneck.</p>
<p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsm data-lang=jsm><span style=color:#75715e>// this isn't quite right. It works, but we'll see the problem later on
</span><span style=color:#75715e></span><span style=color:#a6e22e>useEffect</span>(() => {
    <span style=color:#a6e22e>fetchRecipe</span>()
  })
</code></pre></div>
Let’s do a post morterm to see the problem in action. Inside the <code>fetchRecipe()</code> in the <em>App.js</em>, try console logging something to indicate when the component is rendered. We could have also just inspected the Network tab in the browser. But sometimes console logging and seeing it in action will probably drive the point home faster.<p></p>
<p>On the <code>third/hook-in-app.js</code> branch of the repo. Edit <code>App.js</code> add the console.log and pop open your console. You should have something similar to below in the <strong>App.js</strong> for this little experiment.</p>
<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsm data-lang=jsm><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useState</span>, <span style=color:#a6e22e>useEffect</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'react'</span>;
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>RecipeList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'./components/RecipeList'</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>RecipeDetails</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'./components/RecipeDetails'</span>


<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>App</span>() {
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>apiKey</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`36920f6651c9cd9d91a6c3205cabaa19`</span>
  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`https://www.food2fork.com/api/search?key=</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>apiKey</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>showHomeButton</span>, <span style=color:#a6e22e>setShowHomeButton</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#66d9ef>false</span>)
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>recipes</span>, <span style=color:#a6e22e>setRecipes</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>([])
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>loading</span>, <span style=color:#a6e22e>setLoading</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#66d9ef>true</span>)
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>search</span>, <span style=color:#a6e22e>setSearch</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>''</span>)


  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>fetchRecipe</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>async</span> () => {
      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>recipeData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>url</span>)
      <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>recipes</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>recipeData</span>.<span style=color:#a6e22e>json</span>()
      <span style=color:#a6e22e>setRecipes</span>(<span style=color:#a6e22e>recipes</span>)
      <span style=color:#a6e22e>setLoading</span>(<span style=color:#66d9ef>false</span>)
      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>"I am beign rendered again and again"</span>)
  }

  <span style=color:#a6e22e>useEffect</span>(() => {
    <span style=color:#a6e22e>fetchRecipe</span>()

  })

  <span style=color:#66d9ef>return</span> (
    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>></span>
      {<span style=color:#a6e22e>loading</span> <span style=color:#f92672>?</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>"text-center"</span><span style=color:#f92672>></span>...<span style=color:#a6e22e>fetching</span> {<span style=color:#a6e22e>search</span>} <span style=color:#a6e22e>Recipe</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1> :</span>
        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>RecipeList</span> <span style=color:#a6e22e>recipes</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>recipes</span>} <span style=color:#f92672>/></span>}
    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div></span>
  );
}
</code></pre></div>
<p>You will get the horror below. What the hell is happening? This is not even acceptable behavior. We got away with it because of the <strong>JSON</strong> response I created. We could make unlimited <code>API</code> calls without issues. Obviously, this cannot be the right way to do things in production. So what’s the problem? or even the solution.</p>
<p></p>
<p>What is immediately clear is that the <code>fetchRecipe</code> continuously tries to fetch a response from the API and is being re-rendered every time by <code>useEffect</code>. Even though nothing has changed. We naturally would have had to clean this up in a class component by unsubscribing from the API call within another <code>componentWillUnmount</code>. Let’s look at how <code>useEffect</code> handle this problem.</p>
<p>Now that we have appreciated the problem, let’s think about the solution. Pause for a moment, what do we actually intend to achieve? In our case we want the <code>fetchRecipe</code> function to run only once when the component mounts - that is fetch data once and display it. Or when anything has an effect on the result of the function. At this point, nothing affects the result. So how do we then overcome this problem? Quite simple it turns out.</p>
<p>Inside the <code>useEffect</code> function, we simply pass an empty array as the second parameter. Hence, we are indicating to the <code>useEffect</code> not to update except when the component is first mounted since we expect nothing to cause fetch recipe function to update. Just like below.</p>
<p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsm data-lang=jsm>  <span style=color:#a6e22e>useEffect</span>(() => {
    <span style=color:#a6e22e>fetchRecipe</span>()
  }, []) <span style=color:#75715e>// pass an empty array here.
</span></code></pre></div>
And now if you went back into the <code>App.js</code> and do a console.log, you will realize <code>fetchRecipe</code> only runs once.<p></p>
<p></p>
<p>This is great, works well for our case. But what if we wanted to update and re-render after something causes <code>fetchRecipe</code> to change. You might ask what could this be. Let’s say we have a state that changes the <em>url</em> for fetching the data. It means the data from <code>fetchRecipe</code> depends on <code>url</code>. We just simply pass that parameter inside the array passed to <code>useEffect</code>. Hence, we can pass as many parameters as needed into the array.</p>
<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsm data-lang=jsm>  <span style=color:#a6e22e>useEffect</span>(() => {
    <span style=color:#a6e22e>fetchRecipe</span>()
  }, [<span style=color:#a6e22e>url</span>,<span style=color:#a6e22e>query</span>])
</code></pre></div>
<blockquote>
<p>What you are saying in human language to <code>useEffect</code> is that: only update when <code>url</code> or <code>query</code> parameter changes.
</p>
</blockquote>
<p>I recommend <a href=https://www.robinwieruch.de/react-hooks-fetch-data/ >RobinWieruch </a>tutorial for more examples if you still get confused.</p>
<p>Getting back to our app…</p>
<h1 id=lets-build-the-recipesearch-component>Let’s build the <code>RecipeSearch</code> component.</h1>
<p>Armed with the knowledge of safely fetching data, we’ll now switch to using the API key from food2fork. Hence, we’ll be doing some refactoring within <code>App.js</code>. We’ll also introduce the best practice of having a <code>try catch</code> block inside the async function to catch any errors.</p>
<blockquote>
<p>clone the <code>4/feature/implemented-search</code> branch of the repo to follow along.</p>
</blockquote>
<p>First, let’s think of what we want to achieve with the search component and then think of how to achieve this. So, we want to enter a search, when we click submit or press enter, we want to change the content of the page to the new search result. And we also would want to be able to go back to the top 30 recipes, and thus clearing the search (or return to the top 30 results, depending on how you think about it). See what I mean below.</p>
<p>&lt;img src= “<a href=https://cdn.hashnode.com/res/hashnode/image/upload/v1561987859280/PRfjvgOML.gif%22>https://cdn.hashnode.com/res/hashnode/image/upload/v1561987859280/PRfjvgOML.gif"</a> style="display: block;margin-left: auto;margin-right: auto;width: 70%; ></p>
<p>Now, we have a goal in mind, how do we write the code with <code>hooks</code>. Note, I am trying to make this as basic as possible, such that even with very basic React knowledge you can still build this. So not everything is exactly <code>hook</code> specific.</p>
<p>Immediately, it becomes obvious we definitely need some states to manage all those changes. First, we fetch another set of 30 <strong>recipe</strong> related to our search query. That’s one state. We also have to decide when the <code>Go back Home</code> button should appear or disappear, you got it mate!. That’s another state. Lastly, and perhaps the most important <code>state</code> is that holding our <code>search</code> parameter.</p>
<p>Like previously, let’s look at how the code looks like in the <code>App.js</code> and then explain it line by line. Full code for search feature <a href=https://github.com/olajohn-ajiboye/Blog-React-Hook-Tutorial/blob/feature/implemented-search/src/App.js>here</a></p>
<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsm data-lang=jsm><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useState</span>, <span style=color:#a6e22e>useEffect</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'react'</span>;
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>RecipeList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'./components/RecipeList'</span>;
<span style=color:#66d9ef>import</span> <span style=color:#e6db74>'./App.css'</span>


<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>App</span>() {
  <span style=color:#75715e>// remeber to replace key
</span><span style=color:#75715e></span>  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>apiKey</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`36920f6651c9cd9d91a6c3205cabaa19`</span>
  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`https://www.food2fork.com/api/search?key=</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>apiKey</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>showHomeButton</span>, <span style=color:#a6e22e>setShowHomeButton</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#66d9ef>false</span>)
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>recipes</span>, <span style=color:#a6e22e>setRecipes</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>([])
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>loading</span>, <span style=color:#a6e22e>setLoading</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#66d9ef>true</span>)
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>search</span>, <span style=color:#a6e22e>setSearch</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>''</span>)
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>error</span>, <span style=color:#a6e22e>setError</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>''</span>)

  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>fetchRecipe</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>async</span> () => {
    <span style=color:#66d9ef>try</span> {
      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>recipeData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>url</span>)
      <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>recipes</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>recipeData</span>.<span style=color:#a6e22e>json</span>()
      <span style=color:#a6e22e>setRecipes</span>(<span style=color:#a6e22e>recipes</span>)
      <span style=color:#a6e22e>setLoading</span>(<span style=color:#66d9ef>false</span>)

    } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>e</span>) {
      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>e</span>) {
        <span style=color:#a6e22e>setError</span>(<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>message</span>)
        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>error</span>)
      }
    }
  }

  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleSubmit</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>async</span> (<span style=color:#a6e22e>e</span>) => {
    <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>preventDefault</span>()
    <span style=color:#66d9ef>try</span> {
      <span style=color:#a6e22e>setLoading</span>(<span style=color:#66d9ef>true</span>)
      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>searchUrl</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>url</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&q=</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>search</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>
      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>searchedRecipeData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>searchUrl</span>)
      <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>recipes</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>searchedRecipeData</span>.<span style=color:#a6e22e>json</span>()
      <span style=color:#a6e22e>setRecipes</span>(<span style=color:#a6e22e>recipes</span>)
      <span style=color:#a6e22e>setLoading</span>(<span style=color:#66d9ef>false</span>)
      <span style=color:#a6e22e>setShowHomeButton</span>(<span style=color:#66d9ef>true</span>)
    } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>e</span>) {
      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>e</span>)
    }
  }

  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleSearchChange</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>e</span>) => {
    <span style=color:#a6e22e>setSearch</span>(<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)
  }

  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleReturnHome</span> <span style=color:#f92672>=</span> () => {
    <span style=color:#a6e22e>fetchRecipe</span>()
    <span style=color:#a6e22e>setShowHomeButton</span>(<span style=color:#66d9ef>false</span>)
  }

  <span style=color:#a6e22e>useEffect</span>(() => {
    <span style=color:#a6e22e>fetchRecipe</span>()

  }, [])

  <span style=color:#66d9ef>return</span> (
    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>></span>
      {<span style=color:#a6e22e>loading</span> <span style=color:#f92672>?</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>"text-center"</span><span style=color:#f92672>></span>...<span style=color:#a6e22e>fetching</span> {<span style=color:#a6e22e>search</span>} <span style=color:#a6e22e>Recipe</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1> :</span>
        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>RecipeList</span>
          <span style=color:#a6e22e>search</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>search</span>}
          <span style=color:#a6e22e>handleSubmit</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handleSubmit</span>}
          <span style=color:#a6e22e>handleSearchChange</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handleSearchChange</span>}
          <span style=color:#a6e22e>recipes</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>recipes</span>}
          <span style=color:#a6e22e>showHomeButton</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>showHomeButton</span>}
          <span style=color:#a6e22e>handleReturnHome</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>handleReturnHome</span>} <span style=color:#f92672>/></span>}
    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div></span>
  );
}

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>App</span>;
</code></pre></div>
<p>Noticed, how we have changed a couple of things. First, we are now safely making API requests directly. Hence, we are using our real API keys. It will become apparent why we can’t continue using my <code>json</code> anyways. Let’s go line, by line.</p>
<p>We have set a variable for the <code>url</code>. We know how the URL endpoint looks like from the <a href=https://www.food2fork.com/about/api>food2fork</a> documentation. Next, we set up a state with for <code>showHomeButton</code> to handle visibility for the home button. And set the initial value to <code>false</code>. That is, initially when we’ll be in the home page, there’s no point displaying home button. The next two <code>states</code> are already familiar. Then we have the <code>search</code> state, and we set the original value to an empty string. Since we are not searching for anything yet when we first visit the home page.</p>
<p>Next, we have to manage how we respond to user typing in the search query. We have set up the <code>handleSearchChange</code> function to handle that. We have the <code>handleSubmit</code> button to take care of updating the data in the list to match the result from the search. And finally, we have the <code>handleReturnHome</code> function to obviously, you guessed right. Help us return home safely with just the 30 top recipes.</p>
<p>Let’s examine how each function performs its duty.</p>
<p>First, <code>handleSearchChange</code> . The purpose is to capture user entry and then update the <code>search</code> state to equal user entry. This is quite straight forward as the function body is even just 1 line.</p>
<p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsm data-lang=jsm> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleSearchChange</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>event</span>) => {
    <span style=color:#a6e22e>setSearch</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)
  }
</code></pre></div>
Here is how it works, since we are responding to user input, we have access to the <code>onChange</code> property from the event object. We have simply grabbed the value from the <code>event.target.value</code> and updated the search state with this value using the <code>setSearch hook</code>. We then need to pass them as props all the way down to the <code>RecipeSearch</code> component like below. This is one of those things to solve with <code>Context API</code>.<p></p>
<p>Next, let’s examine the most interesting function in App.js. The <code>handleSubmit</code>. What does it do? Let’s look at the code first and then explain.</p>
<p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsm data-lang=jsm> <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleSubmit</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>async</span> (<span style=color:#a6e22e>e</span>) => {
    <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>preventDefault</span>()
    <span style=color:#66d9ef>try</span> {
      <span style=color:#a6e22e>setLoading</span>(<span style=color:#66d9ef>true</span>)
      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>searchUrl</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>url</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&q=</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>search</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>
      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>searchedRecipeData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>searchUrl</span>)
      <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>recipes</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>searchedRecipeData</span>.<span style=color:#a6e22e>json</span>()
      <span style=color:#a6e22e>setRecipes</span>(<span style=color:#a6e22e>recipes</span>)
      <span style=color:#a6e22e>setLoading</span>(<span style=color:#66d9ef>false</span>)
      <span style=color:#a6e22e>setShowHomeButton</span>(<span style=color:#66d9ef>true</span>)
    } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>e</span>) {
      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>e</span>)
    }
  }
</code></pre></div>
Since this is going to be triggered on submit. We have access to the <code>event</code> object. First, we need to prevent the default behavior of <code>onSubmit</code> which is to reload the page, hence we have <code>e.preventDefault()</code>. We set the loading state to true with <code>setLoading(true)</code> indicating we are still fetching data. We then take the current state of <code>search</code> that is now equal to the input by the user. We use this to create a new API point based on the documentation we have from food2fork. And then fetches new data based on this search query. It then updates the current <code>recipe</code> state with <code>setRecipe</code> to match with the new data from the search query. Now that we have the data we set <code>loading</code> state to false using <code>setLoading(false)</code>. Now the new recipe list is based on the search query, we need a way to go back home. Hence, we have set the <code>showHomeButton</code> to true using <code>setShowHomeButton</code>.<p></p>
<p>Lastly, we have the <code>handleReturnHome</code> function whose job is to get us back home with the top 30 recipe list. So we simply fetched recipe as we did originally, this already sets back the <code>recipe</code> state back to how it was. We then set the <code>showHomeButton</code> back to false, making the button disappear when we are on the home page. We then simply passed down all the required states as props to child components where we’d use them.</p>
<h2 id=the-context-api><strong><code>The Context API</code></strong></h2>
<p>React Context API is essentially a way to create global states that can be used anywhere within the application. This is an alternative to passing down props from grandparents to children and so on. It’s been touted as a lighter alternative to Redux. In my experience, I will say it more closely resembles Vue’s VueX. Where you have a single source of truth and can access that state globally.</p>
<p>Let’s examine the case of props drilling in our application. You can imagine in an application simple as this, we already have to pass props from <code>App.js</code> through <code>RecipeList</code> and then to <code>RecipeSearch</code>. Even though RecipeList component does not need the <code>handlesSubmit</code> and <code>handlesSearchChange</code> props we still need to pass them through because it’s the parent component to <code>RecipeSearch</code>. Imagine more deeply nested components trees, then you can already see chaos. Libraries like Redux helps solve this problem but context is a simple lightweight version.</p>
<p>&lt;img src= “<a href=https://cdn.hashnode.com/res/hashnode/image/upload/v1562193246399/6iH63N_v0.png%22>https://cdn.hashnode.com/res/hashnode/image/upload/v1562193246399/6iH63N_v0.png"</a> style="display: block;margin-left: auto;margin-right: auto;width: 70%; ></p>
<h2 id=usecontext-hook-to-the-rescue><em>useContext</em> hook to the rescue</h2>
<p>So what if we could access whatever state we want higher up within the component tree and just use them only where they are needed. This is what we are going to do next with <code>useContext hook</code>. There are a couple of things to understand with context API.</p>
<ul>
<li>Context is designed to share data that can be considered “global” for a tree of React components.</li>
<li>Context is primarily used when some data needs to be accessible by many components at different nesting level</li>
</ul>
<p>Let’s discuss the API that context gives us. First we have <code>React.createContext</code>. It create a Context object. When React renders a component that subscribes to this Context object it will read the current context value from the closest matching Provider above it in the tree.</p>
<p><code>Context.Provider</code> - Every Context object comes with a Provider React component that allows consuming components to subscribe to context changes.</p>
<p><code>Context.Consumer</code> - A React component that subscribes to context changes. This lets you subscribe to a context within a function component.</p>
<h2 id=lets-bundle-all-this-into-our-example-and-see-how-it-works>Let’s bundle all this into our example and see how it works.</h2>
<p>First, let’s create a context folder or just a file with and index.js file in it. Inside <code>index.js</code> we need to create a <code>Provider</code> that accepts and provides the data to all children components within it. First, let’s move all our data fetching logic from <code>App.js</code> into the context file. You should be left with an almost empty <code>App.js</code> like below.</p>
<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsm data-lang=jsm><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useContext</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'react'</span>;
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>RecipeList</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'./components/RecipeList'</span>
<span style=color:#66d9ef>function</span> <span style=color:#a6e22e>App</span>() {

  <span style=color:#66d9ef>return</span> (
    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>></span>
      {<span style=color:#a6e22e>loading</span> <span style=color:#f92672>?</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>"text-center"</span><span style=color:#f92672>></span>...<span style=color:#a6e22e>fetching</span> {<span style=color:#a6e22e>search</span>} <span style=color:#a6e22e>recipe</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1> :</span>
        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>RecipeList</span> <span style=color:#f92672>/></span>}
    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div></span>
  );
}
<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#a6e22e>App</span>;
</code></pre></div>
<p>And <code>index.js</code> …</p>
<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsm data-lang=jsm><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useState</span>, <span style=color:#a6e22e>useEffect</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'react'</span>

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>RecipeContext</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>createContext</span>()

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>apiKey</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`7cdab426afc366070dab735500555521`</span>

<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>RecipeProvider</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>props</span>) => {
  <span style=color:#66d9ef>let</span> <span style=color:#a6e22e>url</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`https://www.food2fork.com/api/search?key=</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>apiKey</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>showHomeButton</span>, <span style=color:#a6e22e>setShowHomeButton</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#66d9ef>false</span>)
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>recipes</span>, <span style=color:#a6e22e>setRecipes</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>([])
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>loading</span>, <span style=color:#a6e22e>setLoading</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#66d9ef>true</span>)
  <span style=color:#66d9ef>const</span> [<span style=color:#a6e22e>search</span>, <span style=color:#a6e22e>setSearch</span>] <span style=color:#f92672>=</span> <span style=color:#a6e22e>useState</span>(<span style=color:#e6db74>''</span>)

  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>fetchRecipe</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>async</span> () => {
    <span style=color:#66d9ef>try</span> {
      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>recipeData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>url</span>)
      <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>recipes</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>recipeData</span>.<span style=color:#a6e22e>json</span>()
      <span style=color:#a6e22e>setRecipes</span>(<span style=color:#a6e22e>recipes</span>)
      <span style=color:#a6e22e>setLoading</span>(<span style=color:#66d9ef>false</span>)
      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>recipes</span>)
    } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>e</span>) {
      <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>e</span>) {
        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>message</span>, <span style=color:#e6db74>'Try updating the API key in App.js'</span>)
      }
    }
  }
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleSubmit</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>async</span> (<span style=color:#a6e22e>e</span>) => {
    <span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>preventDefault</span>()
    <span style=color:#66d9ef>try</span> {
      <span style=color:#a6e22e>setLoading</span>(<span style=color:#66d9ef>true</span>)
      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>searchUrl</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>`</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>url</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&q=</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>search</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>
      <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>searchedRecipeData</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>searchUrl</span>)
      <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>recipes</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>await</span> <span style=color:#a6e22e>searchedRecipeData</span>.<span style=color:#a6e22e>json</span>()
      <span style=color:#a6e22e>setRecipes</span>(<span style=color:#a6e22e>recipes</span>)
      <span style=color:#a6e22e>setLoading</span>(<span style=color:#66d9ef>false</span>)
      <span style=color:#a6e22e>setShowHomeButton</span>(<span style=color:#66d9ef>true</span>)
    } <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>e</span>) {
      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#a6e22e>e</span>)
    }
  }
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleSearchChange</span> <span style=color:#f92672>=</span> (<span style=color:#a6e22e>e</span>) => {
    <span style=color:#a6e22e>setSearch</span>(<span style=color:#a6e22e>e</span>.<span style=color:#a6e22e>target</span>.<span style=color:#a6e22e>value</span>)
  }
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleReturnHome</span> <span style=color:#f92672>=</span> () => {
    <span style=color:#a6e22e>fetchRecipe</span>()
    <span style=color:#a6e22e>setShowHomeButton</span>(<span style=color:#66d9ef>false</span>)
  }

  <span style=color:#a6e22e>useEffect</span>(() => {
    <span style=color:#a6e22e>fetchRecipe</span>()

  }, [])

  <span style=color:#66d9ef>return</span> (
    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>RecipeContext</span>.<span style=color:#a6e22e>Provider</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{{
      <span style=color:#a6e22e>loading</span>,
      <span style=color:#a6e22e>search</span>,
      <span style=color:#a6e22e>showHomeButton</span>,
      <span style=color:#a6e22e>recipes</span>,
      <span style=color:#a6e22e>handleSearchChange</span>,
      <span style=color:#a6e22e>handleSubmit</span>,
      <span style=color:#a6e22e>handleReturnHome</span>,
    }}<span style=color:#f92672>></span>
      {<span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>children</span>}
    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/RecipeContext.Provider></span>
  )
}

<span style=color:#66d9ef>export</span> { <span style=color:#a6e22e>RecipeProvider</span>,  <span style=color:#a6e22e>RecipeContext</span> }
</code></pre></div>
<h3 id=lets-try-to-understand-the-above-code-by-taking-it-apart-carefully>Let’s try to understand the above code by taking it apart carefully.</h3>
<p>We have simply moved all the logic for data fetching from our <code>App.js</code> into <code>index.js</code> so as to make it available globally. We already know the drill, we have the data and the states just like we did before.</p>
<p>Now, to the interesting part, on line 2. We have created the <code>RecipeContext</code> from <code>React.createContext()</code> method. RecipeContext is just a variable, the name is not relevant, it is simply good practice to give it a name close to what it does. When we created the <code>RecipeContext</code> it gives us access to 2 other properties namely the <code>Provider</code> and the <code>Consumer</code>. The <strong>Provider</strong> gives us a way to pass all the data and states as props from the topmost part of React tree to wherever we would like to consume it. Hence we created <code>RecipeContext.Provider</code> and passed down all states and data as a prop called **value **. We then export these values to be used. Like below. It will become clearer when we begin to use them.</p>
<p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsm data-lang=jsm> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>RecipeContext</span>.<span style=color:#a6e22e>Provider</span> <span style=color:#a6e22e>value</span><span style=color:#f92672>=</span>{{
      <span style=color:#a6e22e>loading</span>,
      <span style=color:#a6e22e>search</span>,
      <span style=color:#a6e22e>showHomeButton</span>,
      <span style=color:#a6e22e>recipes</span>,
      <span style=color:#a6e22e>handleSearchChange</span>,
      <span style=color:#a6e22e>handleSubmit</span>,
      <span style=color:#a6e22e>handleReturnHome</span>,
    }}<span style=color:#f92672>></span>
      {<span style=color:#a6e22e>props</span>.<span style=color:#a6e22e>children</span>}
    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/RecipeContext.Provider></span>
  )
}

<span style=color:#66d9ef>export</span> { <span style=color:#a6e22e>RecipeProvider</span>,  <span style=color:#a6e22e>RecipeContext</span> }
</code></pre></div>
Next, we have to locate the highest tree in our component hierarchy to pass the <strong>value</strong> props to. It’s only through this way that it can be able to pass it along to all its children. And that would be the <code>index.js</code> in our root. This is where the <code>App</code> component is located. Hence, the App component is able to pass any data or state as props to wherever it will be needed. In the <code>index,js</code> in the root of your application. You should wrap the <code>RecipeProvider</code> around App like below.<p></p>
<p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsm data-lang=jsm><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'react'</span>;
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>ReactDOM</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'react-dom'</span>;
<span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>RecipeProvider</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'./context/index'</span>

<span style=color:#a6e22e>ReactDOM</span>.<span style=color:#a6e22e>render</span>(
  <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>RecipeProvider</span><span style=color:#f92672>></span>
    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>App</span> <span style=color:#f92672>/></span>
  <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/RecipeProvider></span>
  , document.<span style=color:#a6e22e>getElementById</span>(<span style=color:#e6db74>'root'</span>));
</code></pre></div>
From here henceforth all the props pass down inside our context file is available to all the children of <code>App</code> component, which is essentially every component. The exciting part is how we’ll then use this. We’ll make an example with <code>RecipeList</code> and <code>RecipeSearch</code> components. Your <strong>RecipeList</strong> component should look like below.<p></p>
<div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsm data-lang=jsm><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useContext</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'react'</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Recipe</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'./Recipe'</span>
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>RecipeSearch</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'./RecipeSearch'</span>
<span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>RecipeContext</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'../context/index'</span>

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>RecipeList</span>() {
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>appContext</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useContext</span>(<span style=color:#a6e22e>RecipeContext</span>)
  <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>showHomeButton</span>, <span style=color:#a6e22e>recipes</span>, <span style=color:#a6e22e>handleReturnHome</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>appContext</span>

  <span style=color:#66d9ef>return</span> (
    <span style=color:#f92672>&lt;></span>
      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>RecipeSearch</span><span style=color:#f92672>>&lt;</span><span style=color:#960050;background-color:#1e0010>/RecipeSearch></span>
      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>"container my-5 home-button"</span><span style=color:#f92672>></span>
        {<span style=color:#a6e22e>showHomeButton</span> <span style=color:#f92672>&&</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>button</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>"button"</span>
          <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>"btn btn-warning"</span>
          <span style=color:#a6e22e>onClick</span><span style=color:#f92672>=</span>{() => <span style=color:#a6e22e>handleReturnHome</span>()}<span style=color:#f92672>></span>
          <span style=color:#a6e22e>Go</span> <span style=color:#a6e22e>Back</span> <span style=color:#a6e22e>Home</span>
        <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/button>}</span>
        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>" d-flex d-flex justify-content-center mb-3"</span><span style=color:#f92672>></span>
          <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>"text-slaned "</span><span style=color:#f92672>></span><span style=color:#a6e22e>Recipe</span> <span style=color:#a6e22e>List</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/h1></span>
        <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div></span>

        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>"row recipe-list"</span><span style=color:#f92672>></span>
          {<span style=color:#a6e22e>recipes</span>.<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>recipe</span> => {
            <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Recipe</span>
              <span style=color:#a6e22e>key</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>recipe</span>.<span style=color:#a6e22e>recipe_id</span>} <span style=color:#a6e22e>recipe</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>recipe</span>} <span style=color:#f92672>/></span>
          })}
        <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div></span>
      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div></span>
    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/></span>
  )
}
</code></pre></div>
<p>We have now imported <code>RecipeContext</code> from our file and imported <code>useContext</code> from React. Inside our function, we created a variable to hold the value of RecipeContext. We then just grab only the values we need inside <strong>RecipeList</strong>. This is so clean in many ways, 2 of which are.</p>
<ul>
<li>First, we just went to <code>RecipeList</code> straight where we needed those states and data, we didn’t have to thread the props from parent to children.</li>
<li>Second, we only extracted the props we needed within the component, we didn’t need to give <code>RecipeList</code> some props it didn’t need but just has to pass along to its children. We just go to that child component directly if they needed the data.</li>
</ul>
<p>Let’s examine <code>RecipeSearch</code> component. Once again, let’s see the code and then explain it.</p>
<p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-jsm data-lang=jsm><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span>, { <span style=color:#a6e22e>useContext</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'react'</span>
<span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>RecipeContext</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>'../context/index'</span>

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>RecipeSearch</span>() {
  <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>appContext</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>useContext</span>(<span style=color:#a6e22e>RecipeContext</span>)
  <span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>handleSubmit</span>, <span style=color:#a6e22e>handleSearchChange</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>appContext</span>

  <span style=color:#66d9ef>return</span> (
    <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>"container d-flex justify-content-center my-5"</span><span style=color:#f92672>></span>
      <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>form</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>"form-inline"</span> <span style=color:#a6e22e>onSubmit</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) => <span style=color:#a6e22e>handleSubmit</span>(<span style=color:#a6e22e>e</span>)}<span style=color:#f92672>></span>
        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>label</span> <span style=color:#a6e22e>htmlFor</span><span style=color:#f92672>=</span><span style=color:#e6db74>"search"</span> <span style=color:#f92672>></span><span style=color:#a6e22e>Search</span><span style=color:#f92672>:&lt;</span><span style=color:#960050;background-color:#1e0010>/label></span>
        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>input</span> <span style=color:#a6e22e>data</span><span style=color:#f92672>-</span><span style=color:#a6e22e>age</span><span style=color:#f92672>=</span><span style=color:#e6db74>"Love"</span> <span style=color:#a6e22e>onChange</span><span style=color:#f92672>=</span>{(<span style=color:#a6e22e>e</span>) => <span style=color:#a6e22e>handleSearchChange</span>(<span style=color:#a6e22e>e</span>)} <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>"text"</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>"form-control"</span> <span style=color:#a6e22e>id</span><span style=color:#f92672>=</span><span style=color:#e6db74>"search"</span> <span style=color:#a6e22e>placeholder</span><span style=color:#f92672>=</span><span style=color:#e6db74>"coffeee"</span> <span style=color:#a6e22e>name</span><span style=color:#f92672>=</span><span style=color:#e6db74>"search"</span> <span style=color:#f92672>/></span>
        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>button</span> <span style=color:#a6e22e>type</span><span style=color:#f92672>=</span><span style=color:#e6db74>"submit"</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>"btn btn-primary"</span><span style=color:#f92672>>&lt;</span><span style=color:#a6e22e>i</span> <span style=color:#a6e22e>className</span><span style=color:#f92672>=</span><span style=color:#e6db74>"fa fa-search"</span><span style=color:#f92672>>&lt;</span><span style=color:#960050;background-color:#1e0010>/i>&lt;/button></span>
      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/form></span>
    <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/div></span>
  )
}
</code></pre></div>
Like in the <strong>RecipeList</strong> we have imported <code>useContext</code> and <strong>RecipeContext</strong>. We created the variables. And just see how clean and concise this is, we didn’t have to get <code>handleSubmit</code> and <code>handleSearchChange</code> from <strong>RecipeList</strong> we just simply grabbed them from the context here.<p></p>
<p>And that’s just about it. We have covered 3 major types of hooks. <em>useState</em>, <em>useEffect</em> and <em>useContext</em>. I believe these are the foundation necessary to understand more advanced and better ways to work with react hooks. I believe they are cleaner and easier to digest for a beginner.</p>
<p>Moving forward, if you’d like to gain a deeper understanding. You can refactor the <code>Recipe</code> component to use the <code>useContext</code>. Take an old project with a class component and convert it into a functional component just using hooks. If you want something more challenging, learn the <code>useReducer</code> hook and how we can refactor multiple states in our <strong>context</strong> file to make use of <strong>useReducer</strong></p>
<p>Thank you!. The full code can be found on <a href=https://github.com/olajohn-ajiboye/Blog-React-Hook-Tutorial>github</a>. Comments and feedback are welcomed.</article>
<footer class=post-footer>
<ul class=post-tags>
<li class=post-tag><a href=/tags/react><span class=tag>React</span></a></li>
<li class=post-tag><a href=/tags/beginner><span class=tag>Beginner</span></a></li>
<li class=post-tag><a href=/tags/javascript><span class=tag>Javascript</span></a></li>
<li class=post-tag><a href=/tags/react-hooks><span class=tag>React Hooks"</span></a></li>
</ul>
<div class=sharing>
<a class="share share-facebook" target=_blank href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2folajohn.me%2fpost%2freact-hook-and-context-api-part2%2f" title="Share on Facebook">
<svg class="icon icon-facebook" fill=currentColor><use xlink:href=#icon-facebook /></svg>
</a>
<a class="share share-twitter" target=_blank href="https://twitter.com/intent/tweet/?text=Learn%20React%20Hook%20and%20Context%20Api%20Part%282%29&url=http%3a%2f%2folajohn.me%2fpost%2freact-hook-and-context-api-part2%2f" title="Share on Twitter">
<svg class="icon icon-twitter" fill=currentColor><use xlink:href=#icon-twitter /></svg>
</a>
</div>
</footer>
</section>
<footer class=footer>
<p>Copyright © 2018-2020 Ola John</p>
<p>Powered by <a href=https://gohugo.io/ target=_blank>Hugo</a> with theme <a href=https://github.com/huyb1991/hugo-lamp title="Hugo LAMP" target=_blank>LAMP</a>.</p>
</footer>
<amp-analytics type=googleanalytics>
<script type=application/json>
{
      "vars": { "account": "UA-41823028-2" },
      "triggers": { "trackPageview": { "on": "visible", "request": "pageview" } }
    }
</script>
</amp-analytics>
